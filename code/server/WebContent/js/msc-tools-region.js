(function(b,c,a){var d=a.tools.region=function(e){return this._init(e);};d.prototype={_init:function(e){this.config=c.extend({},d.defaults,e);this._bindDom();this.config.auto&&this._initAuto();this._bind();this.config.auto&&this._trigger();return this;},_bindDom:function(){var e=this.config;this._dom={};this._dom.province=e.province?c(e.province):null;this._dom.city=e.city?c(e.city):null;this._dom.area=e.area?c(e.area):null;},_trigger:function(){var e=this.config.defaultValue,f=this;setTimeout(function(){f.val(e.province,e.city,e.area);});},_setProvince:function(f){var g=this._dom,e=d.data;if(f&&g.province&&e[f]){g.province.val(f).triggerHandler("change",["val"]);}},_setCity:function(g){var h=this._dom,e,f=d.data;if(g&&h.city){e=h.province.val();if(e&&f[e][g]){h.city.val(g).triggerHandler("change",["val"]);}}},_setArea:function(g){var i=this._dom,e,f=d.data,h;if(g&&i.area){e=i.province.val();h=i.city.val();if(e&&c.inArray(g,f[e][h]||[])>-1){i.area.val(g).change();}}},val:function(e,j,g){var f=this,i=f._dom,h=d.data;if(c.isPlainObject(e)){j=e.city;g=e.area;e=e.province;}e&&f._setProvince(e);if(j){setTimeout(function(){f._setCity(j);},100);}if(g){setTimeout(function(){f._setArea(g);},200);}return f;},_initAuto:function(){var e=this.config,f=this._dom;e.defaultValue={};f.province&&(e.defaultValue.province=f.province.val());f.city&&(e.defaultValue.city=f.city.val());f.area&&(e.defaultValue.area=f.area.val());},_bind:function(){var e=this,i=e._dom,h,g=d.data,f;i.province.change(function(k,j){setTimeout(function(){e._changeProvince(j);});});if(i.city){i.city.html('<option value="">请选择市</option>').change(function(k,j){setTimeout(function(){e._changeCity(j);});});}if(i.area){i.area.html('<option value="">请选择区/县</option>');}h='<option value="">请选择省</option>';for(f in g){h+='<option value="'+f+'">'+f+"</option>";}i.province.empty().html(h);setTimeout(function(){i.province.change();});},_changeCity:function(f){var k=this._dom,j,h,i,g,e;if(k.area){g=k.province.val();e=k.city.val();i=d.data;j="<option>请选择区/县</option>";if(!g||!e||!i[g][e]||!i[g][e].length){k.area.html(j).prop("disabled",true);}else{c.each(i[g][e],function(l,m){j+="<option value="+m+">"+m+"</option>";});k.area.prop("disabled",false).html(j);}setTimeout(function(){k.area.change();});}},_changeProvince:function(e){var j=this._dom,i,f,h,g;if(j.city){g=j.province.val();h=d.data;i="<option>请选择市</option>";j.city.empty();if(!g||!c.isPlainObject(h[g])){j.city.html(i).prop("disabled",true);}else{for(f in h[g]){i+="<option value="+f+">"+f+"</option>";}j.city.prop("disabled",false).html(i);}setTimeout(function(){j.city.change();});}}};d.defaults={province:"",city:"",area:"",auto:false};}(window,jQuery,msc));